import{r as I,_ as S,R as T,f as G,g as R,P as m,d as E,j as s,h as F,i as P,u as q,k as D,l as z,m as x,n as B,o as p,p as c,q as h,t as u,F as U,v as _,w as j,x as g,y as A,z as N,A as f,E as C,D as y,G as H,H as M,I as w}from"./index-6I6FUoZj.js";import{G as $}from"./GuestHeader-yh-VBL1n.js";import{C as v}from"./CInputGroupText-Bb8hfrTx.js";import{c as V}from"./cil-lock-locked-DmxpJbVL.js";var o=I.forwardRef(function(e,i){var n=e.children,l=e.className,t=S(e,["children","className"]);return T.createElement("div",G({className:R("card-group",l)},t,{ref:i}),n)});o.propTypes={children:m.node,className:m.string};o.displayName="CCardGroup";const X=()=>{const{userInfo:e}=E(r=>r.auth);if(e!=null&&e.id)return s.jsx(F,{to:"/dashboard"});const i=P(),n=q(),[l,{isLoading:t}]=D.useLoginMutation(),b={email:"",password:""},L=z({email:x().email("Invalid email address").required("Required"),password:x().required("Required")}),k=async(r,{setSubmitting:W})=>await l(r).unwrap().then(a=>{n(M({userInfo:a.user,token:a.accessToken})),i("/dashboard"),w.success("Login successful")}).catch(a=>{var d;a.status==422&&w.error(((d=a==null?void 0:a.data)==null?void 0:d.message)||"Invalid credentials")});return s.jsxs("div",{className:"min-vh-100 d-flex flex-column gap-5",children:[s.jsx($,{}),s.jsx("div",{className:"bg-body-tertiary  d-flex flex-grow-1 flex-row align-items-center",children:s.jsx(B,{children:s.jsx(p,{className:"justify-content-center",children:s.jsx(c,{md:8,children:s.jsxs(o,{children:[s.jsx(h,{className:"p-4",children:s.jsx(u,{children:s.jsx(U,{initialValues:b,validationSchema:L,onSubmit:k,children:({isSubmitting:r})=>s.jsxs(_,{children:[s.jsx("h1",{children:"Login"}),s.jsx("p",{className:"text-body-secondary",children:"Sign In to your account"}),s.jsxs(j,{children:[s.jsx(v,{children:s.jsx(g,{icon:A})}),s.jsx(N,{name:"email",type:"email",placeholder:"Email",autoComplete:"email",as:f})]}),s.jsx("span",{className:"fst-italic fs-6 p-0 m-0",style:{fontSize:"0.8rem"},children:s.jsx(C,{name:"email",component:"div",className:"text-danger"})}),s.jsxs(j,{className:"mt-3",children:[s.jsx(v,{children:s.jsx(g,{icon:V})}),s.jsx(N,{name:"password",type:"password",placeholder:"Password",autoComplete:"current-password",as:f})]}),s.jsx("span",{className:"fst-italic fs-6 p-0 m-0",style:{fontSize:"0.8rem"},children:s.jsx(C,{name:"password",component:"div",className:"text-danger"})}),s.jsxs(p,{className:"mt-4",children:[s.jsx(c,{xs:6,children:s.jsx(y,{type:"submit",color:"primary",className:"px-4",disabled:r||t,children:r||t?"Logging in...":"Login"})}),s.jsx(c,{xs:6,className:"text-right",children:s.jsx(y,{color:"link",className:"px-0",children:"Forgot password?"})})]})]})})})}),s.jsx(h,{className:"text-white bg-primary py-5 d-none d-lg-block",style:{width:"44%"},children:s.jsxs(u,{className:"text-center",children:[s.jsx("img",{src:H,alt:"tupt-logo",width:"100"}),s.jsx("h2",{className:"fw-bolder",children:"TUP-T Dashboard"}),s.jsx("p",{className:"text-white",children:"Welcome to the TUP Taguig Dashboard! Please login to continue."})]})})]})})})})})]})};export{X as default};
